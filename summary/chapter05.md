질문 리스트

#### 5. 레디스를 캐시로 사용하기

- 캐시란? 
- 캐시는 어떨때 도입하는것이 좋은가? (4가지 경우) 

#### 캐시로서의 레디스
장점
1. 키-밸류의 단순함
2. 인메모리의 빠름
3. 고가용성

#### 캐싱 전략
레디스를 캐시로 사용할 때 레시스를 어떻게 배치하느냐에 따라서 서비스의 성능에 큰 영향을 끼칠 수 있다.

##### 읽기전략 - look aside
그림5-2

- 캐시 히트란? 
- 캐시 미스란?
- 레디스에 데이터가 없을때만 데이터가 저장되는 방식의 구조를 뭐라고하는가? 
    - 이 구조의 단점 2가지
- 캐시 워밍이란? 
  - 언제 사용하는가?

##### 쓰기 전략과 캐시의 일관성

캐시불일치란?
- write through 방식이란? 
  - 이 방식의 장점은?
  - 이 방식의 단점은?
- cache invalidation 방식이란? 
  - 이 방식의 장점은? 
- write behind(write back) 방식이란?
  - 이 방식은 언제 사용하는가?

#### 캐시에서의 데이터 흐름

### 만료 시간
TTL이란? 
- 표현되는 단위는? 
- 만료시간이 지난 이후에 데이터 어떻게되는가?
- 왜 이런 설정을 해야하는가?
- EXPIRE, EX 옵션은 무슨 명령어인가?
- TTL 명령어는 무엇인가?
- PTTL, PEXPIRE 명령어는 무엇인가?
- INCR, RENAME 명령어를 이용해 이름을 바꾸면 만료 시간은 어떻게 되는가?
- 기존 키에 새로운 값을 저장해 키를 덮어쓰면 만료 시간은 유지되는가?

레디스에서 키가 만료되었다고 해도 메모리에서 바로 삭제되는가?
- Passive 방식은 무엇인가?
- Active 방식은 무엇인가?
- 만료된 키를 바로 삭제하지 않기때문에 키를 삭제하는데 리소스는 줄일 수 있지만 어떤 문제가 있을 수 있는가?

#### 메모리 관리와 maxmemory-policy 설정 (중요)
TTL을 통해서 데이터를 자동 삭제한다고 하더라고 제한된 메모리가 가득찰 수 있다. </br>
메모리가 가득 찼을때 레디스의 내부 정책을 사용해 어떤 키를 삭제할지 결정해야한다. </br>
maxmemory-policy는 메모리가 가득 찼을때 어떤 정책을 사용할지 결정하는 파라미터이다. </br>

maxmemory-policy 옵션 
- noeviction(default): 무엇인가? 언제 사용하는가?
- LRU eviction: 무엇인가? 이 옵션은 어떤것을 전제로하는가?
  - volatile-lru: 무엇인가? 어떤 단점이 있는가?
  - allkeys-lru: 무엇인가?
- LFU eviction: 무엇인가? 이 옵션은 어떤것을 전제로하는가?
  - volatitle-lfu: 무엇인가? 어떤 단점이 있는가?
  - allkeys-lfu: 무엇인가? 
- RANDOM eviction: 무엇인가? 단점은 무엇인가? 권장하는가?
  - volatitle-random: 무엇인가?
  - allkeys-random: 무엇인가?
- volatitle-ttl: 무엇인가?

#### 캐시 스탬피드 현상
캐시 스탬피드 현상이란? 키워드: look-aside, 중복읽기, 중복쓰기 키워드를 활용해 설명하시오 </br>
캐시 스탬피드 현상이 가져오는 문제점은?
해결방법?
1. 적절한 만료 시간 설정
2. 선 계산
3. PER 알고리즘: currentTime - (timeToCompute * beta * log(rand())) > expiry 
   - currentTime: 현재 만료 시간
   - timeToCompute: 캐시된 값을 다시 계산하는데 걸리는 시간
   - beta: 기본적으로 1. 0 보다 큰 값으로 설정 가능
   - rand(): 0과 1사이의 랜덤 값을 반환하는 함수
   - expiry: 키를 재설정할 때 새로 넣어줄 만료 시간 </br>
   --> 이 값이 true가 되면 애플리케이션을 데이터를 다시 계산 또는 조회해서 redis에 데이터를 적재한다.

### 세션 스토어로서의 레디스

#### 세션이란?
- 세션이란? 

#### 세션 스토어가 필요한 이유
- 서버가 여러대 일때의 세션 관리 문제점은 무엇인가?
- 각 서버의 세션을 복사해서 저장하는 방식인 all to all 방식은 무엇이 단점인가? 
- DB를 세션 스토어로 사용하는것은 무엇이 문제인가?
- redis를 세션 스토어로 사용하면 어떤것이 좋은가?

#### 캐시와 세션의 차이
캐시 패턴(look aside pattern)와 세션 사용 패턴의 차이는 무엇인가? 

그림 5-18
그림 5-19